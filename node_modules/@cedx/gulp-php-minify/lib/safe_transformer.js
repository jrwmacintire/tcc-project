'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SafeTransformer = undefined;

var _child_process = require('child_process');

var _rxjs = require('rxjs');

class SafeTransformer {
  constructor(minifier) {
    this._minifier = minifier;
  }

  transform(script) {
    const exec = _rxjs.Observable.bindNodeCallback(_child_process.execFile, stdout => stdout);
    return exec(this._minifier.binary, ['-w', script], { maxBuffer: 10 * 1024 * 1024 });
  }
}
exports.SafeTransformer = SafeTransformer;